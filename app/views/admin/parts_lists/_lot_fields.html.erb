<% lot = f.object %>

<div class="card mt-2 p-2" data-lot-form="true">
  <section class="row no-gutters">
    <div class="col-3 element-image-wrapper">
      <%= image_tag(lot.thumb_image, class: 'image-fluid') if lot.element.present? %>
    </div>
    <div class="col-9 px-2">
      <div class="card-block px-2">
        <% if lot.element.present? %>
          <h4 class="card-title"><%= "#{lot.part_ldraw_id} :: #{lot.part_name}" %></h4>
          <p class="card-text"><span class="font-weight-bold">Color:</span> <%= "#{lot.color_ldraw_id} :: #{lot.color_bl_name}" %></p>
        <% else %>
          <div id="element-grouping">
            <%= f.text_field :element_id, class: 'd-none hidden-element-id', value: lot.element_id, data: { element_id: true } %>
            <div class="form-group row">
                <%= f.label :part, class: 'form-label col-2 mt-2 d-flex justify-content-end' %>
                <div class="col-10">
                  <%= f.text_field :part, class: 'form-control', placeholder: 'Brick 1 x 1', data: { autocomplete_select: true, autocomplete_source: admin_parts_path, element_select: true, part_select: true } %>
                </div>
            </div>
            <div class="form-group row">
              <%= f.label :color, class: 'form-label col-2 mt-2 d-flex justify-content-end' %>
              <div class="col-10">
                <%= f.select :color, @colors.map { |p| [p['bl_name'],p['id']] }, { prompt: true }, class: 'form-control', data: { element_select: true, color_select: true } %>
              </div>
            </div>
          </div>
        <% end %>
        <div class="form-group row">
          <%= f.label :quantity, 'Qty', class: 'form-label col-2 mt-2 d-flex justify-content-end' %>
          <div class="col-10">
            <%= f.text_field :quantity, type: 'number', class: 'form-control', value: lot.quantity %>
          </div>
        </div>
        <div class="form-group row">
          <%= f.label :note, 'Note', class: 'form-label col-2 mt-2 d-flex justify-content-end' %>
          <div class="col-10">
            <%= f.text_field :note, class: 'form-control', value: lot.note %>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end px-2">
        <%= f.link_to_remove "Remove this Lot" %>
      </div>
    </div>
  </section>
</div>
